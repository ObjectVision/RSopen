////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Dit is RSOpen, de open source versie van het model RuimteScanner. Het scipt wordt uitgegeven onder GNU-GPL licentie.
//
// RSOpen is ontwikkeld door PBL Planbureau voor de Leefomgeving, i.s.m Object Vision B.V. en VU Vrije Universiteit Amsterdam.
// Opdrachtgever/ontwikkelaar PBL: Bart Rijken
// Contactpersoon/ontwikkelaar Object Vision B.V.: Jip Claassens (jclaassens@objectvision.nl)
// Contacpersoon PBL: Bas van Bemmel (Bas.vanBemmel@pbl.nl)
//
// In deze file wordt per sector x subsector de evt voorkeurslocaties ('treden') beschreven, van hoog naar laag
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

container Trede
: Descr = "In deze module wordt per subsector de eventuele voorkeurslocaties ('treden') beschreven, van hoog naar laag. Welke er beschouwd worden is bepaald in de variant parameters in Trede_Variant in VariantK"
{
	container SectorxSubsectoren := 
		for_each_ne(
			Sector/xSubsector/name
			, 'Templates/Trede_T('+string(id(Sector/xSubsector))+'[Sector/xSubsector], src)'
		);
	
	container src
	{
		attribute<Bool> Maatregelen  (AllocDomain):= Modus(VariantData/Maatregelen/Overstromingsgevaarzones/Totaal, CompactedAdminDomain/AllocDomain_rel);
		attribute<Bool> NietBouwen   (AllocDomain):= Modus(VariantData/NietBouwen/Overstromingsgevaarzones/Totaal, CompactedAdminDomain/AllocDomain_rel);
		attribute<Bool> Bouwen       (AllocDomain):= !(NietBouwen || Maatregelen);
		
		container Zonneladder := for_each_nedv(VariantParameters/Tredes/Zon/LadderTreden/name, 'BaseData/Zonneladder/PerAllocDomain/Result/'+VariantParameters/Tredes/Zon/LadderTreden/name, AllocDomain, bool);
		
		attribute<Bool> BinnenStimuliWonen                              (AllocDomain) := = 'Modus(Stimuli/Wonen/Result, AdminDomain/AllocDomain_rel)';
		attribute<Bool> BinnenStimuliWerken                             (AllocDomain) := = 'Modus(Stimuli/Werken/Result, AdminDomain/AllocDomain_rel)';
		attribute<Bool> BinnenStimuliVerblijfsrecreatie                 (AllocDomain) := = 'Modus(Stimuli/Verblijfsrecreatie/Result, AdminDomain/AllocDomain_rel)';
		attribute<Bool> BinnenStimuliWind                               (AllocDomain) := = 'Modus(Stimuli/Wind/Result, AdminDomain/AllocDomain_rel)';
		attribute<Bool> BinnenStimuliZon                                (AllocDomain) := = 'Modus(Stimuli/Zon/Result, AdminDomain/AllocDomain_rel)';
		attribute<Bool> BuitenStimuliWonen                              (AllocDomain) := !BinnenStimuliWonen;
		attribute<Bool> BuitenStimuliWerken                             (AllocDomain) := !BinnenStimuliWerken;
		attribute<Bool> BuitenStimuliVerblijfsrecreatie                 (AllocDomain) := !BinnenStimuliVerblijfsrecreatie;
		attribute<Bool> BuitenStimuliWind                               (AllocDomain) := !BinnenStimuliWind;
		attribute<Bool> BuitenStimuliZon                                (AllocDomain) := !BinnenStimuliZon;
		
		attribute<Bool> BinnenHardePlancapaciteitWonen                  (AllocDomain) := SourceData/Plancapaciteit/Read/Wonen/Hard/Per_AllocDomain;
		attribute<Bool> BinnenZachtePlancapaciteitWonen                 (AllocDomain) := SourceData/Plancapaciteit/Read/Wonen/Zacht/Per_AllocDomain;
		attribute<Bool> BinnenPlancapaciteitWonen                       (AllocDomain) := BinnenHardePlancapaciteitWonen || BinnenZachtePlancapaciteitWonen;
		attribute<Bool> BuitenPlancapaciteitWonen                       (AllocDomain) := !BinnenPlancapaciteitWonen;
		attribute<Bool> BuitenHardePlancapaciteitWonen                  (AllocDomain) := !BinnenHardePlancapaciteitWonen;
		attribute<Bool> BuitenZachtePlancapaciteitWonen                 (AllocDomain) := !BinnenZachtePlancapaciteitWonen;
		
		attribute<Bool> BinnenHardePlancapaciteitWerken                 (AllocDomain) := SourceData/Plancapaciteit/Read/Werken/Hard/Per_AllocDomain;
		attribute<Bool> BinnenZachtePlancapaciteitWerken                (AllocDomain) := SourceData/Plancapaciteit/Read/Werken/Zacht/Per_AllocDomain;
		attribute<Bool> BinnenPlancapaciteitWerken                      (AllocDomain) := BinnenHardePlancapaciteitWerken || BinnenZachtePlancapaciteitWerken;
		attribute<Bool> BuitenPlancapaciteitWerken                      (AllocDomain) := !BinnenPlancapaciteitWerken;
		attribute<Bool> BuitenHardePlancapaciteitWerken                 (AllocDomain) := !BinnenHardePlancapaciteitWerken;
		attribute<Bool> BuitenZachtePlancapaciteitWerken                (AllocDomain) := !BinnenZachtePlancapaciteitWerken;
		
		attribute<Bool> BinnenHardePlancapaciteitVerblijfsrecreatie     (AllocDomain) := SourceData/Plancapaciteit/Read/Verblijfsrecreatie/Hard/Per_AllocDomain;
		attribute<Bool> BinnenZachtePlancapaciteitVerblijfsrecreatie    (AllocDomain) := SourceData/Plancapaciteit/Read/Verblijfsrecreatie/Zacht/Per_AllocDomain;
		attribute<Bool> BinnenPlancapaciteitVerblijfsrecreatie          (AllocDomain) := BinnenHardePlancapaciteitVerblijfsrecreatie || BinnenZachtePlancapaciteitVerblijfsrecreatie;
		attribute<Bool> BuitenPlancapaciteitVerblijfsrecreatie          (AllocDomain) := !BinnenPlancapaciteitVerblijfsrecreatie;
		attribute<Bool> BuitenHardePlancapaciteitVerblijfsrecreatie     (AllocDomain) := !BinnenHardePlancapaciteitVerblijfsrecreatie;
		attribute<Bool> BuitenZachtePlancapaciteitVerblijfsrecreatie    (AllocDomain) := !BinnenZachtePlancapaciteitVerblijfsrecreatie;
		
		attribute<Bool> BinnenHardePlancapaciteitWind                   (AllocDomain) := SourceData/Plancapaciteit/Read/Wind/Hard/Per_AllocDomain;
		attribute<Bool> BinnenZachtePlancapaciteitWind                  (AllocDomain) := SourceData/Plancapaciteit/Read/Wind/Zacht/Per_AllocDomain;
		attribute<Bool> BinnenPlancapaciteitWind                        (AllocDomain) := BinnenHardePlancapaciteitWind || BinnenZachtePlancapaciteitWind;
		attribute<Bool> BuitenPlancapaciteitWind                        (AllocDomain) := !BinnenPlancapaciteitWind;
		attribute<Bool> BuitenHardePlancapaciteitWind                   (AllocDomain) := !BinnenHardePlancapaciteitWind;
		
		attribute<Bool> BinnenHardePlancapaciteitZon                    (AllocDomain) := SourceData/Plancapaciteit/Read/Zon/Hard/Per_AllocDomain;
		attribute<Bool> BinnenZachtePlancapaciteitZon                   (AllocDomain) := SourceData/Plancapaciteit/Read/Zon/Zacht/Per_AllocDomain;
		attribute<Bool> BinnenPlancapaciteitZon                         (AllocDomain) := BinnenHardePlancapaciteitZon || BinnenZachtePlancapaciteitZon;
		attribute<Bool> BuitenPlancapaciteitZon                         (AllocDomain) := !BinnenPlancapaciteitZon;
		
		attribute<Bool> OntwikkelendePartij                             (AllocDomain) := Classifications/Actor/EigendomK/IsOntwikkelendePartij[BaseData/StartState/Eigendom/Per_AllocDomain];
		attribute<Bool> OntwikkelendePartijEnMaatschappelijk            (AllocDomain) := Classifications/Actor/EigendomK/IsOntwikkelendePartijEnMaatschappelijk[BaseData/StartState/Eigendom/Per_AllocDomain];
		attribute<Bool> OntwikkelendePartijEnCommercieel                (AllocDomain) := Classifications/Actor/EigendomK/IsOntwikkelendePartijEnCommercieel[BaseData/StartState/Eigendom/Per_AllocDomain];
		attribute<Bool> NietOntwikkelendePartij                         (AllocDomain) := !OntwikkelendePartij;
		
		attribute<Bool> IsOntwikkelendePartijEnMaatschappelijkEnBinnenBBG                                   (AllocDomain) := BaseData/StartState/Eigendom/IsOntwikkelendePartijEnMaatschappelijkEnBinnenBBG;
		attribute<Bool> IsOntwikkelendePartijEnMaatschappelijkEnBinnenBBGOfOntwikkelendePartijEnCommercieel (AllocDomain) := IsOntwikkelendePartijEnMaatschappelijkEnBinnenBBG || OntwikkelendePartijEnCommercieel;
		
		attribute<Bool> BBG                                             (AllocDomain) := BaseData/Omgeving/BBG;
		attribute<Bool> Geen_BBG                                        (AllocDomain) := !BBG;
		
		attribute<Bool> Pampus                                          (AllocDomain) := BaseData/Omgeving/Pampus;
		attribute<Bool> GeenPampus                                      (AllocDomain) := !Pampus;
		
		// attribute<Bool> RondBevolkingskern50kPlus                       (AllocDomain) := BaseData/Omgeving/RondBevolkingskern/Is50kPlus;
		attribute<Bool> RondBevolkingskern20kPlus                       (AllocDomain) := BaseData/Omgeving/RondBevolkingskern/Is20kPlus;
		attribute<Bool> RondBevolkingskern20kMin                        (AllocDomain) := BaseData/Omgeving/RondBevolkingskern/Is20kMin;
		
		attribute<Bool> RondBevolkingskern5_20k                         (AllocDomain) := RondBevolkingskern20kMin  && BaseData/Omgeving/RondBevolkingskern/Is5kPlus;
		attribute<Bool> RondBevolkingskern20k_50k                       (AllocDomain) := RondBevolkingskern20kPlus && BaseData/Omgeving/RondBevolkingskern/Is50kMin;
		
		attribute<Bool> RondBevolkingskern20kMinBelevingLandschapIsHoog (AllocDomain) := RondBevolkingskern20kMin && BelevingLandschapIsHoog;
		
		attribute<Bool> ZeerNabijOV                                     (AllocDomain) := BaseData/Omgeving/OV_Reistijd/ZeerNabijOV;
		attribute<Bool> NabijOV                                         (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NabijOV;
		attribute<Bool> BeperktNabijOV                                  (AllocDomain) := BaseData/Omgeving/OV_Reistijd/BeperktNabijOV;
		attribute<Bool> NietNabijOV                                     (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOV;
		
		attribute<Bool> ZeerNabijOVRondKern50kPlus                      (AllocDomain) := BaseData/Omgeving/OV_Reistijd/ZeerNabijOVRondKern50kPlus;
		attribute<Bool> NabijOVRondKern50kPlus                          (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NabijOVRondKern50kPlus;
		attribute<Bool> ZeerNabijOVRondKern20kPlus                      (AllocDomain) := BaseData/Omgeving/OV_Reistijd/ZeerNabijOVRondKern20kPlus;
		attribute<Bool> NabijOVRondKern20kPlus                          (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NabijOVRondKern20kPlus;
		
		attribute<Bool> NietNabijOVRondKern300kPlus                     (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern300kPlus;
		attribute<Bool> NietNabijOVRondKern100kPlus                     (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern100kPlus;
		attribute<Bool> NietNabijOVRondKern50kPlus                      (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern50kPlus;
		attribute<Bool> NietNabijOVRondKern50kMin                       (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern50kMin;
		attribute<Bool> NietNabijOVRondKern20kPlus                      (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern20kPlus;
		attribute<Bool> NietNabijOVRondKern20kMin                       (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern20kMin;
		attribute<Bool> NietNabijOVRondKern5kPlus                       (AllocDomain) := BaseData/Omgeving/OV_Reistijd/NietNabijOVRondKern5kPlus;
	
		attribute<Bool> LangsRijksWegen                                 (AllocDomain) := SourceData/Infrastructuur/Rijkswegen;
		attribute<Bool> LangsPrimaireWaterkeringen                      (AllocDomain) := SourceData/Water/PrimaireWaterkeringen;
		attribute<Bool> LangsRijkswegenOfPrimaireWaterkeringen          (AllocDomain) := SourceData/Water/PrimaireWaterkeringen;
		
		attribute<Bool> IsBouwterrein                                   (AllocDomain) := BaseData/Startstate/Grondgebruik/Per_AllocDomain/IsBouwterrein;
		
		attribute<Bool> BinnenN2K1000mBuffer                            (AllocDomain) := Modus(BaseData/Omgeving/N2K1000mBuffer, AdminDomain/AllocDomain_rel);
		attribute<Bool> BuitenN2K1000mBuffer                            (AllocDomain) := !BinnenN2K1000mBuffer;
		
		attribute<Bool> BinnenNationaalPark                             (AllocDomain) := SourceData/Natuur/Nationale_parken_van_wereldklasse/IsNationaalParkWereldklasse || SourceData/Natuur/VanGoghNationaalPark/IsVanGoghNationaalPark;
		attribute<Bool> BuitenNationaalPark                             (AllocDomain) := !BinnenNationaalPark;
		
		attribute<Bool> WelWindInBasisjaar                              (AllocDomain) := sum(BaseData/StartState/StateBasisjaar/State/Wind/Totaal, AdminDomain/AllocDomain_rel) > 0[MW];
		attribute<Bool> GeenWindInBasisjaar                             (AllocDomain) := !WelWindInBasisjaar;
		
		attribute<Bool> BelevingLandschapIsZeerZeerHoog                 (AllocDomain) := BaseData/Omgeving/BelevingLandschap/IsZeerZeerHoog;
		attribute<Bool> BelevingLandschapIsZeerHoog                     (AllocDomain) := BaseData/Omgeving/BelevingLandschap/IsZeerHoog;
		attribute<Bool> BelevingLandschapIsHoog                         (AllocDomain) := BaseData/Omgeving/BelevingLandschap/IsHoog;
		attribute<Bool> BelevingLandschapIsLaag                         (AllocDomain) := BaseData/Omgeving/BelevingLandschap/IsLaag;
		attribute<Bool> BelevingLandschapIsZeerLaag                     (AllocDomain) := BaseData/Omgeving/BelevingLandschap/IsZeerLaag;
		
		attribute<Bool> Totaal (AllocDomain) := const(1[bool], AllocDomain);
	}
}