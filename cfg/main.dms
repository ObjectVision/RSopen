////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Dit is RSOpen, de open source versie van het model RuimteScanner. Het scipt wordt uitgegeven onder GNU-GPL licentie.
//
// RSOpen is ontwikkeld door PBL Planbureau voor de Leefomgeving, i.s.m Object Vision B.V. en VU Vrije Universiteit Amsterdam.
// Opdrachtgever/ontwikkelaar PBL: Bart Rijken
// Contactpersoon/ontwikkelaar Object Vision B.V.: Jip Claassens (jclaassens@objectvision.nl)
// Contacpersoon PBL: Bas van Bemmel (Bas.vanBemmel@pbl.nl) 
//
// Deze file specificeert:
// - het te evalueren (omgevings)scenario, de (beleids)variant en daarmee de casus (= combinatie van scenario en variant);
// - De ruimtelijke resolutie waarop wordt gerekend
// - de dms files die nodig zijn om betreffende caus te evalueren (met 'includes') 
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

container RSopen: IntegrityCheck = "GeoDMSVersion() >= 15.1002"
{
	parameter<string>                     Scenario_name := replace_value(expand(., '%env:RSL_SCENARIO_NAME%'), 'env:RSL_SCENARIO_NAME', 'WLO_hoog');   // Omgevingsscenario: WLO_laag,WLO_hoog
	parameter<string>                     Variant_name  := replace_value(expand(., '%env:RSL_VARIANT_NAME%' ), 'env:RSL_VARIANT_NAME', 'WBSA');        // (Beleids)variant: BAU,WBSA,WBSB,Verdichting,Uitleg
	parameter<string>                     Casus_name    := Scenario_name+'_'+Variant_name;
	parameter<VariantParameters/VariantK> Variant_rel   := ='/VariantParameters/VariantK/V/'+Variant_name;
	
	#include <Units.dms>
	#include <Geography.dms>
	
	#include <ModelParameters.dms>
	#include <VariantParameters.dms>
	
	#include <Classifications.dms>
	container CaseClassifications := Templates/CaseClassificationsT(scenario_name, variant_name);
	
	#include <PrivData.dms>
	#include <SourceData.dms>
	#include <BaseData.dms>
	
	#include <VariantData.dms>
	#include <Allocatie.dms>

	#include <Indicatoren.dms>
	#include <Templates.dms>
	#include <Output.dms>
	
	container CommitChecks
	{
		parameter<string> MaakBaseData                                   := 'Ready', ExplicitSuppliers = "/WriteBasedata/Generate_Run1";
		parameter<string> MaakVariantData                                := 'Ready', ExplicitSuppliers = "/WriteVariantData/Generate_Run1";
		parameter<string> MaakAllocatieY2060                             := 'Ready', ExplicitSuppliers = "/Allocatie/Zichtjaren/Y2060/Impl/Generate";
		
		parameter<string> ClaimRealisatie_Prov_Min                       := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Provincie/MinClaim_realisatie/'+CaseClassifications/StandVar/Claims_sub/name, ';')";
		parameter<string> ClaimRealisatie_Prov_Max                       := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Provincie/MaxClaim_realisatie/'+CaseClassifications/StandVar/Claims_sub/name, ';')";
		parameter<string> ClaimRealisatie_Prov                           := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Provincie/Claim_realisatie/Wonen/'+Classifications/Vastgoed/WP2xVSSH/name, ';')+';'+AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Provincie/Claim_realisatie/Werken/'+Classifications/Actor/Jobs6/name, ';')+';'+AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Provincie/Claim_realisatie/Verblijfsrecreatie/'+Classifications/Actor/VerblijfsrecreatieK/sector_name, ';')";
		
		// parameter<string> ClaimRealisatie_NL_Min                         := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Nederland/MinClaim_realisatie/'+CaseClassifications/StandVar/Claims_sub/name, ';')";
		// parameter<string> ClaimRealisatie_NL_Max                         := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Nederland/MaxClaim_realisatie/'+CaseClassifications/StandVar/Claims_sub/name, ';')";
		// parameter<string> ClaimRealisatie_NL                             := 'Ready', ExplicitSuppliers = "=AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Nederland/Claim_realisatie/Wonen/'+Classifications/Vastgoed/WP2xVSSH/name, ';')+';'+AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Nederland/Claim_realisatie/Werken/'+Classifications/Actor/Jobs6/name, ';')+';'+AsList('/Indicatoren/Y2060/ClaimRealisatie/Per_AllocRegio/Nederland/Claim_realisatie/Verblijfsrecreatie/'+Classifications/Actor/VerblijfsrecreatieK/sector_name, ';')";
		
		parameter<string> Overstromingschade                             := 'Ready', ExplicitSuppliers = "/Indicatoren/Y2060/Overstromingsschade/Resultaat/Result_Totaal";
		// parameter<string> LU_bij                                         := 'Ready', ExplicitSuppliers = "/Indicatoren/Y2060/Landgebruikskaart/Result_bij_tov_PrevYear";
		// parameter<string> LU_af                                          := 'Ready', ExplicitSuppliers = "/Indicatoren/Y2060/Landgebruikskaart/Result_af_tov_PrevYear";
		
		// parameter<string> Verandering_Areaal_perLUMT                     := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Verandering_Areaal_perLUMT";
		// parameter<string> Verandering_Areaal_Landbouw                    := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Verandering_Areaal_Landbouw";
		// parameter<string> Verandering_NettoOpbrengst_gemid_perHa         := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Verandering_NettoOpbrengst_gemid_perHa";
		// parameter<string> Verandering_NettoOpbrengst_Totaal_Studiegebied := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Verandering_NettoOpbrengst_Totaal_Studiegebied";
		// parameter<string> Basisjaar_CO2_Uitstoot                         := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Basisjaar_CO2_Uitstoot";
		// parameter<string> Cumulatief_CO2_Uitstoot                        := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Cumulatief_CO2_Uitstoot";
		// parameter<string> Cumulatief_CO2_kosten_laag                     := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Cumulatief_CO2_kosten_laag";
		// parameter<string> Cumulatief_CO2_kosten_hoog                     := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Cumulatief_CO2_kosten_hoog";
		// parameter<string> Transitie_Matrix                               := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Transitie_Matrix";
		// parameter<string> mean_NPV_obv_LUbasisjaar_perLBK                := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/mean_NPV_obv_LUbasisjaar_perLBK";
		// parameter<string> mean_NPV_obv_LUY2050_perLBK_zonderAugm         := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/mean_NPV_obv_LUY2050_perLBK_zonderAugm";
		// parameter<string> mean_NPV_obv_LUY2050_perLBK_Augmented          := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/mean_NPV_obv_LUY2050_perLBK_Augmented";
		// parameter<string> Bereikbaarheid_GroenBlauw_basisjaar            := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Bereikbaarheid_GroenBlauw/Basisjaar";
		// parameter<string> Bereikbaarheid_GroenBlauw_y2050                := 'Ready', ExplicitSuppliers = "/Indicatoren/Export/Bereikbaarheid_GroenBlauw/Y2060";
	}
	
	// Settings
	#include <ConfigSettings.dms>
	#include <ExportSettings.dms>
	
	// For debug purposes
	container Desktops 
	{
		container x;
	}
	
	#include <WritePrivData.dms>
	#include <WriteBasedata.dms>
	#include <WriteVariantData.dms>
}