https://chatgpt.pbl.nl/ 23 april 2025

git: how to copy a main repo without branches with history into a different git repository with branches?


If you want to copy the main branch of a repository, along with its history, into another repository that already has branches, you can achieve this by following these steps. This process involves fetching the main branch from the original repository and merging it into the new repository:

Clone the new repository:

Start by cloning the new repository (the one that already has branches) to your local machine.

git clone https://github.com/new_user/new_repo.git
cd new_repo
Add the original repository as a remote:

Add the original repository as a temporary remote to fetch its main branch.

git remote add original https://github.com/original_user/original_repo.git
Fetch the main branch from the original repository:

Fetch the main branch from the original repository. This will not affect the branches in the new repository.

git fetch original main
Create a new branch or merge:

You can choose to merge the fetched branch into an existing branch or create a new branch based on it. For example, if you want to create a new branch named
imported-main
:

git checkout -b imported-main original/main
If you want to merge the fetched main branch into the existing
main
branch in the new repository:

git checkout main
git merge original/main
Push changes to the new repository:

Push your changes to the new repository. If you created a new branch, push it:

git push origin imported-main
If you merged into an existing branch, push that branch:

git push origin main
Remove the temporary remote:

Once you're done, you can remove the temporary remote pointing to the original repository.

git remote remove original
This process allows you to bring over the main branch and its history from one repository to another that already has branches, without disturbing the existing branches in the new repository.


Concreet gedaan

(README.md gerenamed naar README_org.md omdat README.md ook bij ObjectVision staat)
clone tortoise git: https://github.com/pbl-nl/model-RSopen.git
in K:\PD_git_PBL\model-RSopen
cd K:\PD_git_PBL\model-RSopen
git remote add original https://github.com/ObjectVision/RSopen.git
git fetch original main
git merge --allow-unrelated-histories original/main  (eigenlijk nauwelijks historie in onze versie)historie


UNIX VI editor popt op:
To write a commit message and get out of VI, follow these steps:

press i (i for insert)
write your merge message
press esc (escape)
write :wq (write & quit)
then press enter


git push origin main
git remote remove original

(README.md gerenamed naar README_ObjectVision.md README_org.md naar README.md)